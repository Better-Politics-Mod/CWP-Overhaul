namespace = minor_historical
# End occupation of Libya
minor_historical.1 = { 
	type = country_event
	title = minor_historical.1.t
	desc = minor_historical.1.d
	flavor = minor_historical.1.f
	placement = s:STATE_LIBYA.region_state:LBY
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3
	trigger = {
		this ?= c:LBY
		owns_entire_state_region = STATE_LIBYA
		is_subject_type = subject_type_military_occupation
		game_date >= 1951.12.1
		NOT = {
			has_variable = minor_historical_1
		}
	}

	cancellation_trigger = {
		NOR = {
			exists = c:LBY
			c:LBY = {
				is_subject_type = subject_type_military_occupation
			}
		}
	}

	immediate = {
		if = {
			limit = {
				exists = c:FEZ
				c:FEZ = {
					is_subject_type = subject_type_military_occupation
				}
			}
			annex = c:FEZ
		}
		set_variable = minor_historical_1
	}

	option = { # We need a king!
		name = minor_historical.1.a
		trigger = {
			overlord = {
				has_law = law_type:law_hereditary
			}
		}
		make_independent = yes
		activate_law = law_type:law_hereditary
	}

	option = { # Form a Republic
		name = minor_historical.1.b
		trigger = {
			overlord = {
				NOR = {
					has_law = law_type:law_hereditary
					has_law = law_type:law_council_elective
				}
			}
		}
		make_independent = yes
		activate_law = law_type:law_executive
	}

	option = { # A Worker's Council
		name = minor_historical.1.c
		trigger = {
			overlord = {
				has_law = law_type:law_council_elective
			}
		}
		make_independent = yes
		activate_law = law_type:law_council_elective
	}
}

# The Eritrea Situation
minor_historical.2 = { 
	type = country_event
	title = minor_historical.2.t
	desc = minor_historical.2.d
	flavor = minor_historical.2.f
	placement = s:STATE_ERITREA.region_state:ERI
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3
	trigger = {
		exists = c:ERI
		c:ERI = {
			is_subject_of = root
			is_subject_type = subject_type_military_occupation
			owns_entire_state_region = STATE_ERITREA
		}
		game_date >= 1950.12.1
		NOT = {
			has_variable = minor_historical_2
		}
	}

	cancellation_trigger = {
		NOR = {
			exists = c:ERI
			c:ERI = {
				is_subject_of = root
				is_subject_type = subject_type_military_occupation
			}
		}
	}

	immediate = {
		set_variable = minor_historical_2
	}

	option = { # Cede Eritrea
		name = minor_historical.2.a
		trigger = {
			exists = c:ETH
			c:ETH = {
				NOR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
		}
		c:ETH = {
			annex = c:ERI
		}

		ai_chance = {
			base = 80
		}
	}

	option = { # Make Eritrea Independent
		name = minor_historical.2.b
		c:ERI = {
			make_independent = yes
		}

		ai_chance = {
			base = 20
		}
	}
}

# Release West Sahara
minor_historical.3 = { 
	type = country_event
	title = minor_historical.3.t
	desc = minor_historical.3.d
	flavor = minor_historical.3.f
	placement = s:STATE_WEST_SAHARA.region_state:SPA
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3
	trigger = {
		this ?= c:SPA
		owns_entire_state_region = STATE_WEST_SAHARA
		game_date >= 1975.1.1
		NOR = {
			is_diplomatic_play_committed_participant = yes
			is_at_war = yes
		}
		NOT = {
			has_variable = minor_historical_3
		}
	}

	cancellation_trigger = {
		NOT = {
			owns_entire_state_region = STATE_WEST_SAHARA
		}
	}

	immediate = {
		set_variable = minor_historical_3
	}

	option = { # Cede West Sahara to Morocco
		name = minor_historical.3.a
		trigger = {
			exists = c:MOR
			c:MOR = {
				NOR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
		}
		S:STATE_WEST_SAHARA.region_state:SPA = {
			set_state_owner = c:MOR
		}
		ai_chance = {
			base = 50
		}
	}

	option = { # Cede West Sahara to Mauritania
		name = minor_historical.3.b
		trigger = {
			exists = c:MAU
			c:MAU = {
				NOR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
		}
		S:STATE_WEST_SAHARA.region_state:SPA = {
			set_state_owner = c:MAU
		}
		ai_chance = {
			base = 20
		}
	}

	option = { # Make West Sahara Independent
		name = minor_historical.3.c
		create_country = {
			tag = WSH
			origin = root
			state = S:STATE_WEST_SAHARA.region_state:SPA
			on_created = {
				effect_currency_usd = yes
			}
		}

		ai_chance = {
			base = 10
		}
	}
}

# Release Al Rif
minor_historical.4 = {
	type = country_event
	title = minor_historical.4.t
	desc = minor_historical.4.d
	flavor = minor_historical.4.f
	placement = s:STATE_AL_RIF.region_state:SPA
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3
	trigger = {
		this ?= c:SPA
		owns_entire_state_region = STATE_AL_RIF
		NOR = {
			is_diplomatic_play_committed_participant = yes
			is_at_war = yes
		}
		OR = {
			AND = {
				exists = c:MOR
				c:MOR = {
					is_subject = no
				}
			}
			NOT = {
				exists = c:MOR
			}
		}
		NOT = {
			has_variable = minor_historical_4
		}
	}

	cancellation_trigger = {
		NOT = {
			owns_entire_state_region = STATE_AL_RIF
		}
	}

	immediate = {
		set_variable = minor_historical_4
	}

	option = { # Cede Al Rif
		name = minor_historical.4.a
		trigger = {
			exists = c:MOR
			c:MOR = {
				NOR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
		}
		S:STATE_AL_RIF.region_state:SPA = {
			set_state_owner = c:MOR
		}
		ai_chance = {
			base = 99
		}
	}

	option = { # Make Al Rif Independent
		name = minor_historical.4.b
		create_country = {
			tag = ALR
			origin = root
			state = S:STATE_AL_RIF.region_state:SPA
			on_created = {
				effect_currency_usd = yes
			}
		}
		ai_chance = {
			base = 1
		}
	}
}

# Release Equitorial Guinea
minor_historical.5 = {
	type = country_event
	title = minor_historical.5.t
	desc = minor_historical.5.d
	flavor = minor_historical.5.f
	placement = root
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3

	trigger = {
		this ?= c:SPA
		any_scope_state = {
			OR = {
				state_region = s:STATE_GUINEA_ISLANDS
				state_region = s:STATE_GABON
			}
		}
		NOT = {
			exists = c:EQG
		}
		NOR = {
			is_diplomatic_play_committed_participant = yes
			is_at_war = yes
		}
		game_date >= 1966.1.1
		NOT = {
			has_variable = minor_historical_5
		}
	}

	cancellation_trigger = {
		NOT = {
			any_scope_state = {
				OR = {
					state_region = s:STATE_GUINEA_ISLANDS
					state_region = s:STATE_GABON
				}
			}
		}
	}

	immediate = {
		set_variable = minor_historical_5
		if = {
			limit = {
				any_scope_state = {
					state_region = s:STATE_GABON
				}
			}
			create_country = {
				tag = EQG
				origin = root
				state = S:STATE_GABON.region_state:SPA
				on_created = {
					effect_currency_usd = yes
				}
			}
			if = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_GUINEA_ISLANDS
					}
				}
				S:STATE_GUINEA_ISLANDS.region_state:SPA = {
					set_state_owner = c:EQG
				}
			}
		}
		else = {
			create_country = {
				tag = EQG
				origin = root
				state = S:STATE_GUINEA_ISLANDS.region_state:SPA
				on_created = {
					effect_currency_usd = yes
				}
			}
		}
	}
	option = { # This was inevitable
		name = minor_historical.5.a
	}
}

# Release Phillipines
minor_historical.6 = {
	type = country_event
	title = minor_historical.6.t
	desc = minor_historical.6.d
	flavor = minor_historical.6.f
	placement = s:STATE_LUZON.region_state:PHI
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3

	trigger = {
		this ?= c:USA
		exists = c:PHI
		c:PHI = {
			is_subject_of = root
			owns_entire_state_region = STATE_LUZON
			NOR = {
				is_diplomatic_play_committed_participant = yes
				is_at_war = yes
			}
		}
		NOR = {
			is_diplomatic_play_committed_participant = yes
			is_at_war = yes
		}
		game_date >= 1946.7.1
		NOT = {
			has_variable = minor_historical_6
		}
	}

	cancellation_trigger = {
		NOT = {
			exists = c:PHI
			c:PHI = {
				is_subject_of = root
			}
		}
	}

	immediate = {
		set_variable = minor_historical_6
	}

	option = { # Make Phillipines Independent
		name = minor_historical.6.a
		c:PHI = {
			make_independent = yes
		}
		change_relations = {
			country = c:PHI
			value = 50
		}
		create_diplomatic_pact ={
			country = c:PHI
			type = defensive_pact
		}
		create_truce = {
			country = c:PHI
			months = 12
		}
		ai_chance = {
			base = 99
		}
	}

	option = { # Make Phillipines Dominion
		name = minor_historical.6.b
		c:PHI = {
			change_subject_type = subject_type_dominion
		}
		change_relations = {
			country = c:PHI
			value = -25
		}
		change_infamy = {
			value = 20
		}
		create_truce = {
			country = c:PHI
			months = 36
		}
		ai_chance = {
			base = 1
		}
	}
}

# Release Japan
minor_historical.7 = {
	type = country_event
	title = minor_historical.7.t
	desc = minor_historical.7.d
	flavor = minor_historical.7.f
	placement = s:STATE_CALIFORNIA.region_state:USA
	icon = "gfx/interface/icons/cwp_icons/united_nations.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middle_east/courtroom_upheaval"
	duration = 3

	trigger = {
		this ?= c:USA
		owns_entire_state_region = STATE_CALIFORNIA
		exists = c:JAP
		c:JAP = {
			is_subject_of = root
			is_subject_type = subject_type_military_occupation
			NOR = {
				is_diplomatic_play_committed_participant = yes
				is_at_war = yes
			}
		}
		NOR = {
			is_diplomatic_play_committed_participant = yes
			is_at_war = yes
		}
		game_date >= 1951.9.1
		NOT = {
			has_variable = minor_historical_6
		}
	}

	cancellation_trigger = {
		NOT = {
			exists = c:JAP
			c:JAP = {
				is_subject_of = root
			}
		}
	}

	immediate = {
		set_variable = minor_historical_6
	}

	option = { # Make Japan Independent
		name = minor_historical.7.a
		c:JAP = {
			make_independent = yes
		}
		change_relations = {
			country = c:JAP
			value = 50
		}
		create_diplomatic_pact ={
			country = c:JAP
			type = defensive_pact
		}
		create_truce = {
			country = c:JAP
			months = 12
		}
		ai_chance = {
			base = 100
		}
	}

	option = { # Make Japan Dominion
		name = minor_historical.7.b
		c:JAP = {
			change_subject_type = subject_type_dominion
		}
		change_relations = {
			country = c:JAP
			value = -25
		}
		change_infamy = {
			value = 100
		}
		create_truce = {
			country = c:JAP
			months = 60
		}
		ai_chance = {
			base = 0
		}
	}
}