 namespace = cwp_generic_economy_events



# Housing For The People
cwp_generic_economy_events.1 = {
	type = country_event

	title = cwp_generic_economy_events.1.t
	desc = cwp_generic_economy_events.1.d
	flavor = cwp_generic_economy_events.1.f

	trigger = {
	}

	event_image = {
		video = "unspecific_trains"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	duration = 3

	immediate = {
		every_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_housing
					level >= 10
				}
			}
			set_variable = max_housing_state
		}
	}

	option = { # people love you
		name = cwp_generic_economy_events.1.a
		default_option = yes
		hidden_effect = {
			every_scope_state = {
				limit = {
					has_variable = max_housing_state
				}
				add_loyalists_in_state = {
					value = 0.1
				}
			}
		}
		custom_tooltip = max_housing_state_tt
	}

	option = { # mmmmm tech
		name = cwp_generic_economy_events.1.b
		trigger = {
			NOT = { has_technology_researched = tube_structural_systems }
			can_research = tube_structural_systems
		}
		add_technology_progress = { progress = 4500 technology = tube_structural_systems }
	}
}


# High Speed Rail
cwp_generic_economy_events.2 = {
	type = country_event

	title = cwp_generic_economy_events.2.t
	desc = cwp_generic_economy_events.2.d
	flavor = cwp_generic_economy_events.2.f

	trigger = {
	}

	event_image = {
		video = "unspecific_trains"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	duration = 3

	immediate = {
		every_scope_state = {
			limit = {
				any_scope_building = {
					is_building_type = building_railway
					has_active_production_method = pm_high_speed_trains
					occupancy >= 0.75
					level >= 5
				}
			}
			set_variable = hsr_state
		}
	}

	option = { # hsr throughput
		name = cwp_generic_economy_events.2.a
		default_option = yes
		hidden_effect = {
			every_scope_state = {
				limit = {
					has_variable = hsr_state
				}
				add_modifier = {
					name = hsr_railway
					months = normal_modifier_time
				}
			}
		}
		custom_tooltip = hsr_state_tt
	}

	option = { # hsr-compatible industries throughput
		name = cwp_generic_economy_events.2.b
		hidden_effect = {
			every_scope_state = {
				limit = {
					has_variable = hsr_state
				}
				any_scope_building = {
					limit = {
						OR = {
							is_building_type = building_coffee_plantation
							is_building_type = building_cotton_plantation
							is_building_type = building_opium_plantation
							is_building_type = building_tea_plantation
							is_building_type = building_tobacco_plantation
							is_building_type = building_sugar_plantation
							is_building_type = building_rubber_plantation
							is_building_type = building_banana_plantation
							is_building_type = building_silk_plantation
							is_building_type = building_coal_mine
							is_building_type = building_oil_rig
							is_building_type = building_iron_mine
							is_building_type = building_bauxite_mine
							is_building_type = building_uranium_mine
							is_building_type = building_lead_mine
							is_building_type = building_phosphorus_mine
							is_building_type = building_gold_mine
							is_building_type = building_logging_camp
						}
						OR = {
							has_active_production_method = pm_intermodal_containers_plantation
							has_active_production_method = pm_double_stack_containers
						}
						occupancy >= 0.75
					}
				}
				add_modifier = {
					name = hsr_pm_state
					months = normal_modifier_time
				}
			}
		}
		custom_tooltip = hsr_pm_state_tt
	}
}