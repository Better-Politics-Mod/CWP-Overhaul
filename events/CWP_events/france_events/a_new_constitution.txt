namespace = a_new_constitution
#REGION Legacy of the Resistance
a_new_constitution.101 = {
	type = country_event
	title = a_new_constitution.101.t
	desc = a_new_constitution.101.d
	flavor = a_new_constitution.101.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "floating_billets"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		c:FRA ?= root
		not = {
			has_variable = fra_constitutional_referendum
		}
	}
	option = {
		name = a_new_constitution.101.a
		default_option = yes
		set_variable = fra_constitutional_referendum
		add_modifier = {
			name = a_new_constitution
			years = 20
			is_decaying = yes
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.102
				days = {
					30
					60
				}
			}
		}
		ai_chance = {
			base = 100
		}
	}
}

#REGION Drafting a new constitution
a_new_constitution.102 = {
	type = country_event
	title = a_new_constitution.102.t
	desc = a_new_constitution.102.d
	flavor = a_new_constitution.102.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	immediate = {
		add_modifier = {
			name = drafting_a_new_constitution
		}
		add_journal_entry = fra_a_new_constitution
	}
	option = {
		name = a_new_constitution.102.a
		default_option = yes
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.103
				days = {
					15
					30
				}
			}
		}
		ai_chance = {
			base = 100
		}
	}
}

#REGION DeGaulle Resigns!
a_new_constitution.103 = {
	type = country_event
	title = a_new_constitution.103.t
	desc = a_new_constitution.103.d
	flavor = a_new_constitution.103.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	immediate = {
		change_variable = {
			name = fra_constitutional_referendum_success
			add = 50
		}
	}
	#OPT Fuck DeGaulle
	option = {
		name = a_new_constitution.103.a
		default_option = yes
		ig:ig_laborists = {
			add_ruling_interest_group = yes
		}
		ig:ig_urbanists = {
			add_ruling_interest_group = yes
		}
		ig:ig_moralists = {
			add_ruling_interest_group = yes
		}
		ig:ig_securocrats = {
			remove_ruling_interest_group = yes
		}
		random_interest_group = {
			limit = {
				is_in_government = yes
			}
			leader = {
				set_character_as_ruler = yes
			}
		}
		change_variable = {
			name = fra_constitutional_referendum_communist_support
			add = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_socialist_support
			add = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_moralist_support
			add = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_gaullist_support
			add = -1
		}
		#TODO: MAKE SURE YOU ACTIVATE REP DEM LATER ONCE THE CONSTITUTION IS WRITTEN
		activate_law = law_type:law_parliamentary
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.201
				days = {
					1
					8
				}
			}
		}
		ai_chance = {
			base = 60
		}
	}
	#OPT Bring him back
	option = {
		name = a_new_constitution.103.b
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.301
				days = {
					1
					8
				}
			}
		}
	}
}

#REGION: Constitutional Debate Gridlocked
a_new_constitution.201 = {
	type = country_event
	title = a_new_constitution.201.t
	desc = a_new_constitution.201.d
	flavor = a_new_constitution.201.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	#OPT a strong senate
	option = {
		name = a_new_constitution.201.a
		custom_tooltip = {
			text = a_new_constitution.201.a.tt
			change_variable = {
				name = fra_constitutional_referendum_communist_support
				add = -1
			}
			change_variable = {
				name = fra_constitutional_referendum_moralist_support
				add = 1
			}
		}
		add_modifier = {
			name = bicameral_parliamentary_republic
			is_decaying = no
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.202
				days = {
					20
					60
				}
			}
		}
		ai_chance = {
			base = 20
		}
	}
	#OPT Compromise
	option = {
		name = a_new_constitution.201.b
		default_option = yes
		custom_tooltip = {
			text = a_new_constitution.201.b.tt
			change_variable = {
				name = fra_constitutional_referendum_communist_support
				add = 0.5
			}
			change_variable = {
				name = fra_constitutional_referendum_socialist_support
				add = 0.5
			}
			change_variable = {
				name = fra_constitutional_referendum_moralist_support
				add = 0.5
			}
			change_variable = {
				name = fra_constitutional_referendum_gaullist_support
				add = 0.5
			}
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.202
				days = {
					20
					60
				}
			}
		}
		ai_chance = {
			base = 60
		}
	}
	#OPT National Assembly
	option = {
		name = a_new_constitution.201.c
		custom_tooltip = {
			text = a_new_constitution.201.c.tt
			change_variable = {
				name = fra_constitutional_referendum_communist_support
				add = 1
			}
			change_variable = {
				name = fra_constitutional_referendum_moralist_support
				add = -1
			}
		}
		add_modifier = {
			name = monocameral_parliamentary_republic
			is_decaying = no
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.202
				days = {
					20
					60
				}
			}
		}
		ai_chance = {
			base = 20
		}
	}
}

#REGION: SECOND SPEECH of BAYEUX
a_new_constitution.202 = {
	type = country_event
	title = a_new_constitution.202.t
	desc = a_new_constitution.202.d
	flavor = a_new_constitution.202.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	#OPT: De Gaulle speaks
	option = {
		name = a_new_constitution.202.a
		custom_tooltip = {
			text = a_new_constitution.202.a.tt
			change_variable = {
				name = fra_constitutional_referendum_gaullist_support
				add = -1
			}
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.601
				days = {
					30
					90
				}
			}
		}
	}
}

#REGION: De Gaulle proposes a trans-partisan committee
a_new_constitution.301 = {
	type = country_event
	title = a_new_constitution.301.t
	desc = a_new_constitution.301.d
	flavor = a_new_constitution.301.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	#OPT: The only way to save France
	option = {
		name = a_new_constitution.301.a
		custom_tooltip = {
			text = a_new_constitution.301.a.tt
			change_variable = {
				name = fra_constitutional_referendum_communist_support
				add = -1
			}
			change_variable = {
				name = fra_constitutional_referendum_socialist_support
				add = -1
			}
			change_variable = {
				name = fra_constitutional_referendum_gaullist_support
				add = 1
			}
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.501
				days = {
					20
					60
				}
			}
		}
		ai_chance = {
			base = 40
		}
	}
	option = {
		name = a_new_constitution.301.b
		custom_tooltip = {
			text = a_new_constitution.301.b.tt
			change_variable = {
				name = fra_constitutional_referendum_gaullist_support
				add = -1
			}
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.401
				days = {
					20
					60
				}
			}
		}
		ai_chance = {
			base = 60
		}
	}
}

#REGION: Constituent Assembly Finishes Draft
a_new_constitution.401 = {
	type = country_event
	title = a_new_constitution.401.t
	desc = a_new_constitution.401.d
	flavor = a_new_constitution.401.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	#OPT: The only way to save France
	option = {
		name = a_new_constitution.401.a
		activate_law = law_type:law_independent_bureaucrats
		custom_tooltip = {
			text = a_new_constitution.401.a.tt
			change_variable = {
				name = fra_constitutional_referendum_communist_support
				add = 1
			}
			change_variable = {
				name = fra_constitutional_referendum_socialist_support
				add = 1
			}
			change_variable = {
				name = fra_constitutional_referendum_moralist_support
				add = 1
			}
			change_variable = {
				name = fra_constitutional_referendum_gaullist_support
				add = -1
			}
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.601
				days = {
					30
					90
				}
			}
		}
	}
}

#REGION: Trans-partisan committee finishes draft
a_new_constitution.501 = {
	type = country_event
	title = a_new_constitution.501.t
	desc = a_new_constitution.501.d
	flavor = a_new_constitution.501.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	#OPT: The only way to save France
	option = {
		name = a_new_constitution.501.a
		activate_law = law_type:law_representative_democracy		
		custom_tooltip = {
			text = a_new_constitution.501.a.tt
			change_variable = {
				name = fra_constitutional_referendum_communist_support
				add = -1
			}
			change_variable = {
				name = fra_constitutional_referendum_moralist_support
				add = 1
			}
			change_variable = {
				name = fra_constitutional_referendum_gaullist_support
				add = 1
			}
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.601
				days = {
					20
					60
				}
			}
		}
	}
}
