#will ultimately be replaced by a_new_constitution
namespace = a_new_constitution_2

#REGION Legacy of the Resistance
a_new_constitution.101 = {
	type = country_event
	title = a_new_constitution.101.t
	desc = a_new_constitution.101.d
	flavor = a_new_constitution.101.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "floating_billets"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		c:FRA ?= root
		not = {
			has_variable = fra_constitutional_referendum
		}
	}
	option = {
		name = a_new_constitution.101.a
		default_option = yes
		set_variable = fra_constitutional_referendum
		add_modifier = {
			name = legacy_of_the_resistance
			years = 20
			is_decaying = yes
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.102
				days = {
					30
					60
				}
			}
		}
		ai_chance = {
			base = 100
		}
	}
}

#REGION Drafting a new constitution
a_new_constitution.102 = {
	type = country_event
	title = a_new_constitution.102.t
	desc = a_new_constitution.102.d
	flavor = a_new_constitution.102.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}
	immediate = {
		if = {
			limit = {
				not = {
					has_variable = drafting_a_new_constitution
				}
			}
			set_variable = drafting_a_new_constitution
		}
		add_journal_entry = fra_a_new_constitution
	}
	option = {
		name = a_new_constitution.102.a
		default_option = yes
		add_modifier = {
			name = drafting_a_new_constitution
		}
		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.103
				days = {
					15
					30
				}
			}
		}
		ai_chance = {
			base = 100
		}
	}
}

a_new_constitution.201 = {
    type = country_event
    hidden = yes
    trigger = {}

    immediate = {
        france_constitution_law_events_launcher = yes
    }
}

# Head of state event
a_new_constitution.210 = {
	type = country_event
	title = a_new_constitution.103.t
	desc = a_new_constitution.103.d
	flavor = a_new_constitution.103.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}

	#OPT Executive
	option = {
		name = a_new_constitution.103.a
		activate_law = law_type:law_executive

		change_variable = {
			name = fra_constitutional_referendum_communist_support
			subtract = 2
		}
		change_variable = {
			name = fra_constitutional_referendum_socialist_support
			subtract = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_moralist_support
			add = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_gaullist_support
			add = 2
		}

		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.201
				days = {
					1
					8
				}
			}
		}
		ai_chance = {
			base = 60
		}
	}

	#OPT Parliamentary
    option = {
        name = a_new_constitution.103.a
        activate_law = law_type:law_parliamentary

        change_variable = {
            name = fra_constitutional_referendum_communist_support
            add = 1
        }
        change_variable = {
            name = fra_constitutional_referendum_socialist_support
            add = 2
        }
        change_variable = {
            name = fra_constitutional_referendum_moralist_support
            add = 1
        }
        change_variable = {
            name = fra_constitutional_referendum_gaullist_support
            subtract = 2
        }

        hidden_effect = {
            trigger_event = {
                id = a_new_constitution.201
                days = {
                    1
                    8
                }
            }
        }
        ai_chance = {
            base = 60
        }
    }

    #OPT Council Elective
    option = {
        name = a_new_constitution.103.a
        activate_law = law_type:law_parliamentary

        change_variable = {
            name = fra_constitutional_referendum_communist_support
            add = 2
        }
        change_variable = {
            name = fra_constitutional_referendum_socialist_support
            add = 0
        }
        change_variable = {
            name = fra_constitutional_referendum_moralist_support
            subtract = 1
        }
        change_variable = {
            name = fra_constitutional_referendum_gaullist_support
            subtract = 2
        }

        hidden_effect = {
            trigger_event = {
                id = a_new_constitution.201
                days = {
                    1
                    8
                }
            }
        }
        ai_chance = {
            base = 60
        }
    }
}

# Distribution of power event
a_new_constitution.210 = {
	type = country_event
	title = a_new_constitution.103.t
	desc = a_new_constitution.103.d
	flavor = a_new_constitution.103.f
	icon = "gfx/interface/icons/event_icons/event_default.dds"
	event_image = {
		video = "gfx/event_pictures/middleeast_courtroom_upheaval.bk2"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/middleeast/courtroom_upheaval"
	duration = 1
	trigger = {
		#triggered from previous event
		always = yes
	}

	#OPT representative democracy
	option = {
		name = a_new_constitution.103.a
		activate_law = law_type:law_representative_democracy

		change_variable = {
			name = fra_constitutional_referendum_communist_support
			subtract = 2
		}
		change_variable = {
			name = fra_constitutional_referendum_socialist_support
			subtract = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_moralist_support
			add = 1
		}
		change_variable = {
			name = fra_constitutional_referendum_gaullist_support
			add = 2
		}

		hidden_effect = {
			trigger_event = {
				id = a_new_constitution.201
				days = {
					1
					8
				}
			}
		}
		ai_chance = {
			base = 60
		}
	}

	#OPT Consensus democracy
    option = {
        name = a_new_constitution.103.a
        activate_law = law_type:law_consensus_democracy

        change_variable = {
            name = fra_constitutional_referendum_communist_support
            add = 1
        }
        change_variable = {
            name = fra_constitutional_referendum_socialist_support
            add = 2
        }
        change_variable = {
            name = fra_constitutional_referendum_moralist_support
            add = 1
        }
        change_variable = {
            name = fra_constitutional_referendum_gaullist_support
            subtract = 2
        }

        hidden_effect = {
            trigger_event = {
                id = a_new_constitution.201
                days = {
                    1
                    8
                }
            }
        }
        ai_chance = {
            base = 60
        }
    }

    #OPT Direct Democracy
    option = {
        name = a_new_constitution.103.a
        activate_law = law_type:law_direct_democracy

        change_variable = {
            name = fra_constitutional_referendum_communist_support
            add = 2
        }
        change_variable = {
            name = fra_constitutional_referendum_socialist_support
            add = 0
        }
        change_variable = {
            name = fra_constitutional_referendum_moralist_support
            subtract = 1
        }
        change_variable = {
            name = fra_constitutional_referendum_gaullist_support
            subtract = 2
        }

        hidden_effect = {
            trigger_event = {
                id = a_new_constitution.201
                days = {
                    1
                    8
                }
            }
        }
        ai_chance = {
            base = 60
        }
    }
}
