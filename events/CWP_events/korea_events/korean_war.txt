namespace = korea_war_events

#hidden event assigning a leading non-communist country
#korea_war_events.1 = {
#	type = country_event
#	placement = root
#	hidden = yes
#
#	duration = 3
#
#	title = korea_war_events.1.t
#	desc = korea_war_events.1.d
#	flavor = korea_war_events.1.f
#
#	event_image = {
#		video = "unspecific_ruler_speaking_to_people"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_election.dds"
#
#	trigger = {
#	}
#	
#	immediate = {
#		ordered_country = {
#			limit = {
#				coa_communist_trigger = no
#			}
#			order_by = country_rank
#
#			save_scope_as = non_communist_leader
#			set_variable = non_communist_leading
#		}
#	}
#}
#
##hidden event assigning a leading communist country
#korea_war_events.2 = {
#	type = country_event
#	placement = root
#	hidden = yes
#
#	duration = 3
#
#	title = korea_war_events.2.t
#	desc = korea_war_events.2.d
#	flavor = korea_war_events.2.f
#
#	event_image = {
#		video = "unspecific_ruler_speaking_to_people"
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#
#	icon = "gfx/interface/icons/event_icons/event_election.dds"
#
#	trigger = {
#	}
#	
#	immediate = {
#		ordered_country = {
#			limit = {
#				coa_communist_trigger = yes
#			}
#			order_by = country_rank
#
#			save_scope_as = communist_leader
#			set_variable = communist_leading
#		}
#	}
#}


### random events triggered by the JE

#Skirmish on the border
korea_war_events.10 = {
	type = country_event
	placement = scope:korean_border_state

	duration = 3

	title = korea_war_events.10.t
	desc = korea_war_events.10.d
	flavor = korea_war_events.10.f

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_election.dds"

	trigger = {
		has_journal_entry = korean_war
		OR = {
			this = c:NRK
			this = c:STK
		}
		NOT = {
			has_global_variable = event_on_korean_border
		}
	}
	
	immediate = {
		set_global_variable = event_on_korean_border
		random_scope_state = {
			limit = {
				owner = c:STK
				any_neighbouring_state = {
					owner = c:NRK
					NOT = {
						owner = root
					}
				}
			}
			save_scope_as = korean_border_state
		}
		random_scope_state = {
			limit = {
				owner = c:NRK
				any_neighbouring_state = {
					owner = c:STK
					NOT = {
						owner = root
					}
				}
			}
			save_scope_as = korean_border_state
		}
		random_country = {
			limit = {
				has_variable = non_communist_leading
			}
			save_scope_as = non_communist_leader
		}
		random_country = {
			limit = {
				has_variable = communist_leading
			}
			save_scope_as = communist_leader
		}
	}

	option = {
		name = korea_war_events.10.a
		default_option = yes

		hidden_effect = {
			remove_global_variable = event_on_korean_border
		}
		if = {
			limit = {
				this = c:STK
			}
			scope:non_communist_leader = {
				trigger_event = {
					id = korea_war_events.100
				}
			}
		}
		else_if = {
			limit = {
				this = c:NRK
			}
			scope:communist_leader = {
				trigger_event = {
					id = korea_war_events.100
				}
			}
		}
	}
	option = {
		name = korea_war_events.10.b
		
		hidden_effect = {
			remove_global_variable = event_on_korean_border
		}
	}
}

#consent event
korea_war_events.100 = {
	type = country_event
	placement = ROOT

	duration = 1

	title = korea_war_events.100.t
	desc = korea_war_events.100.d
	flavor = korea_war_events.100.f

	event_image = {
		video = "unspecific_ruler_speaking_to_people"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_election.dds"

	trigger = {
		has_journal_entry = korean_war
		OR = {
			has_variable = communist_leading
			has_variable = non_communist_leading
		}
	}
	
	immediate = {
	}

	option = {
		name = korea_war_events.100.a
		default_option = yes
	}
}