nuclear_stockpile_sv = {
	value = var:nuclear_stockpile
}

nuclear_stockpile_max = {
    value = 0 
    every_scope_state = {
        limit = {
            has_building = building_nuclear_weapons_facility
        }
		if = {
			limit = {
				is_production_method_active = {
					building_type = building_nuclear_weapons_facility
					production_method = pm_base_nuclear_silo
				}
			}
			add = {
				value = 20
				desc = BASE_NUCLEAR_SILO
				format = "NUCLEAR_SILO_TOOLTIP_FORMAT"
			}
		}
		if = {
			limit = {
				is_production_method_active = {
					building_type = building_nuclear_weapons_facility
					production_method = pm_reinforced_nuclear_silo
				}
			}
			add = {
				value = 40
				desc = REINFORCED_NUCLEAR_SILO
				format = "NUCLEAR_SILO_TOOLTIP_FORMAT"
			}
		}
    }
}

nuclear_stockpile_growth = {
    value = 0 
    every_scope_state = {
        limit = {
            has_building = building_nuclear_weapons_facility
        }
		if = {
			limit = {
				is_production_method_active = {
					building_type = building_nuclear_weapons_facility
					production_method = pm_atomic_warhead_prod
				}
				any_scope_building = {
					is_building_type = building_nuclear_weapons_facility
					building_has_goods_shortage = no
				}
			}
			add = {
				value = 1
				desc = ATOMIC_WARHEAD_PROD
				format = "NUCLEAR_PROD_TOOLTIP_FORMAT"
			}
		}
		if = {
			limit = {
				is_production_method_active = {
					building_type = building_nuclear_weapons_facility
					production_method = pm_thermonuclear_warhead_prod
				}
				any_scope_building = {
					is_building_type = building_nuclear_weapons_facility
					building_has_goods_shortage = no
				}
			}
			add = {
				value = 2
				desc = THERMONUCLEAR_WARHEAD_PROD
				format = "NUCLEAR_PROD_TOOLTIP_FORMAT"
			}
		}
    }
}

nuclear_stockpile_decay = {
	value = 0
	every_scope_state = {
        limit = {
            has_building = building_nuclear_weapons_facility
        }
		if = {
			limit = {
				is_production_method_active = {
					building_type = building_nuclear_weapons_facility
					production_method = pm_no_nuclear_production
				}
			}
			subtract = 1
		}
		if = {
			limit = {
				any_scope_building = {
					is_building_type = building_nuclear_weapons_facility
					building_has_goods_shortage = yes
				}
			}
			subtract = 1
		}
    }
}

nuclear_stockpile_sum = {
	value = 0
	add = {
		value = nuclear_stockpile_growth
		desc = ATOMIC_WARHEAD_PROD
		format = "NUCLEAR_PROD_TOOLTIP_FORMAT"
	}
	subtract = {
		value = nuclear_stockpile_decay
		desc = ATOMIC_WARHEAD_PROD
		format = "NUCLEAR_PROD_TOOLTIP_FORMAT"
	}
	format = "NUCLEAR_PROD_TOOLTIP_FORMAT"
}

nuclear_strike_values = {
	value = nuclear_stockpile_sv
	divide = 10
}

nuclear_progress_increase_per_month = {
	value = {
		value = 0.05
		desc = nuclear_progress_base_value
		format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
	}
	if = {
		limit = {
			has_technology_researched = nuclear_fission
		}
		add = {
			value = 0.25
			desc = tech_nuclear_fission
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = nuclear_reactors
		}
		add = {
			value = 0.25
			desc = tech_nuclear_reactors
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = calutron
		}
		add = {
			value = 0.25
			desc = tech_calutron
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = atomic_bomb
		}
		add = {
			value = 0.25
			desc = tech_atomic_bomb
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = thermonuclear_bomb
		}
		add = {
			value = 0.25
			desc = tech_thermonuclear_bomb
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = nuclear_warfare
		}
		add = {
			value = 0.25
			desc = tech_nuclear_warfare
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = mutually_assured_destruction
		}
		add = {
			value = 0.25
			desc = tech_mutually_assured_destruction
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = massive_retaliation_doctrine
		}
		add = {
			value = 0.25
			desc = tech_massive_retaliation_doctrine
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = minimal_deterrence
		}
		add = {
			value = 0.25
			desc = tech_minimal_deterrence
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = decapitation_strike
		}
		add = {
			value = 0.25
			desc = tech_decapitation_strike
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = counterforce
		}
		add = {
			value = 0.25
			desc = tech_counterforce
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_technology_researched = countervalue
		}
		add = {
			value = 0.25
			desc = tech_countervalue
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
	if = {
		limit = {
			has_variable = nuclear_program_paused
		}
		value = {
			value = 0
			desc = nuclear_program_paused
			format = "NUCLEAR_PROGRESS_INCREASE_FORMAT"
		}
	}
}