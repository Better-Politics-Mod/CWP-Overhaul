add_state_to_target_list = {
	effect = {
		add_to_variable_list = {
			name = wmd_target_list_c
			target = scope:state_to_add.owner
		}
		add_to_variable_list = {
			name = wmd_target_list
			target = scope:state_to_add 
		}
		effect_order_target_list_by_population = yes
	}
}

can_add_state_to_target_list = {
	is_shown = {
		nuclear_stockpile_sv > wmd_target_list_size
	}
}

targetlist_remove_country = {
	effect = {
		every_in_list = {
			variable = wmd_target_list
			limit = {
				owner = scope:target_list_selected_country
			}
			ROOT = {
				remove_list_variable = {
					name = wmd_target_list
					target = PREV
				}
			}
		}
		if = {
			limit = {
				has_variable = targetlist_expanded_country
				scope:target_list_selected_country = var:targetlist_expanded_country
			}
			remove_variable = targetlist_expanded_country
		}
		remove_list_variable = {
			name = wmd_target_list_c
			target = scope:target_list_selected_country
		}
	}
}

targetlist_remove_state = {
	effect = {
		remove_list_variable = {
			name = wmd_target_list
			target = scope:target_list_selected_state
		}
		if = {
			limit = {
				not = {
					any_in_list = {
						variable = wmd_target_list
						owner = scope:target_list_selected_state.owner
					}
				}
			}
			remove_list_variable = {
				name = wmd_target_list_c
				target = scope:target_list_selected_state.owner
			}
			remove_variable = targetlist_expanded_country
		}
	}
}

targetlist_is_in_list = {
	is_shown = {
		is_target_in_variable_list = {
			name = wmd_target_list
			target = scope:target_selected_state
		}
	}
}

targetlist_expand_info = {
	effect = {
		set_variable = {
			name = targetlist_expanded_country
			value = scope:target_list_selected_country
		}
	}
}

targetlist_contract_info = {
	effect = {
		remove_variable = targetlist_expanded_country
	}
}

targetlist_expanded_visible_c = {
	is_shown = {
		or = {
			and = {
				has_variable = targetlist_expanded_country
				scope:target_list_selected_country = var:targetlist_expanded_country
			}
			not = {
				has_variable = targetlist_expanded_country
			}
		}
	}
}

targetlist_expanded_visible_s = {
	is_shown = {
		has_variable = targetlist_expanded_country
		scope:target_list_selected_state.owner = var:targetlist_expanded_country
	}
}

wmd_fire_nuclear_warheads = {
	effect = {
		every_in_list = {
			variable = wmd_target_list
			kill_population_percent_in_state = {
				percent = ROOT.nuclear_strike_population_kill
			}
			THIS.state_region = {
				add_devastation = {
					value = ROOT.nuclear_strike_effectiveness_total
					multiply = 100
				}
			}
			add_modifier = {
				name = nuclear_strike
				multiplier = ROOT.nuclear_strike_effectiveness_total
			}
			trigger_event = {
				id = wmd_attack_events.1
			}
		}
	}
}