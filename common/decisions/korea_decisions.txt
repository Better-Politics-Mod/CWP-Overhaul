unite_korea = {
	is_shown = {
		NOT = {
			exists = c:ROK
			OR = {
				has_global_variable = decision_united_korea
				AND = {
					owns_entire_state_region = STATE_SEOUL
					owns_entire_state_region = STATE_YANGHO
					owns_entire_state_region = STATE_BUSAN
					owns_entire_state_region = STATE_PYONGYANG
					owns_entire_state_region = STATE_SARIWON
				}
			}
			c:NRK ?= {
				owns_entire_state_region = STATE_SEOUL
				owns_entire_state_region = STATE_YANGHO
				owns_entire_state_region = STATE_BUSAN
				owns_entire_state_region = STATE_PYONGYANG
				owns_entire_state_region = STATE_SARIWON
			}
		}
		OR = {
			any_scope_state = {
				region = sr:region_east_asia
			}
			OR = {
				AND = {
					country_or_subject_owns_entire_state_region = STATE_SEOUL
					country_or_subject_owns_entire_state_region = STATE_YANGHO
					country_or_subject_owns_entire_state_region = STATE_BUSAN
				}
				AND = {
					country_or_subject_owns_entire_state_region = STATE_PYONGYANG
					country_or_subject_owns_entire_state_region = STATE_SARIWON
				}
			}
		}
	}
	possible = {
		country_or_subject_owns_entire_state_region = STATE_SEOUL
		country_or_subject_owns_entire_state_region = STATE_YANGHO
		country_or_subject_owns_entire_state_region = STATE_BUSAN
		country_or_subject_owns_entire_state_region = STATE_PYONGYANG
		country_or_subject_owns_entire_state_region = STATE_SARIWON
	}
	when_taken = {
		# A communist country wants to north korea to annex south korea
		if = {
			limit = {
				c:NRK ?= {
					is_direct_subject_of = ROOT
					has_law = law_type:law_council_elective
				}
				c:STK ?= {
					is_direct_subject_of = ROOT
				}
				has_law = law_type:law_council_elective
			}
			c:NRK ?= {
				annex = c:STK
			}
		}
		# A non-communist country wants south korea to annex north korea
		else_if = {
			limit = {
				c:STK ?= {
					is_direct_subject_of = ROOT
				}
				c:NRK ?= {
					is_direct_subject_of = ROOT
				}
				NOT = {
					has_law = law_type:law_council_elective
				}
			}
			c:STK ?= {
				annex = c:NRK
			}
			c:STK ?= {
				change_tag = ROK
			}
		}
		# a communist country wants north korea to have south korean lands
		else_if = {
			limit = {
				NOT = {
					exists = c:STK
				}
				c:NRK ?= {
					is_direct_subject_of = ROOT
				}
				has_law = law_type:law_council_elective
			}
			s:STATE_SEOUL = {
				random_scope_state = {
					set_state_owner = c:NRK
				}
			}
			s:STATE_YANGHO = {
				random_scope_state = {
					set_state_owner = c:NRK
				}
			}
			s:STATE_BUSAN = {
				random_scope_state = {
					set_state_owner = c:NRK
				}
			}
			# just in case
			hidden_effect = {
				s:STATE_PYONGYANG = {
					random_scope_state = {
						set_state_owner = c:NRK
					}
				}
				s:STATE_SARIWON = {
					random_scope_state = {
						set_state_owner = c:NRK
					}
				}
			}
		}
		# a non-communist country wants south korea to have north korean lands
		else_if = {
			limit = {
				OR = {
					NOT = {
						exists = c:NRK
					}
					c:NRK ?= {
						is_direct_subject_of = ROOT
					}
				}
				c:STK ?= {
					is_direct_subject_of = ROOT
				}
				NOT = {
					has_law = law_type:law_council_elective
				}
			}
			s:STATE_PYONGYANG = {
				random_scope_state = {
					set_state_owner = c:STK
				}
			}
			s:STATE_SARIWON = {
				random_scope_state = {
					set_state_owner = c:STK
				}
			}
			c:STK ?= {
				change_tag = ROK
			}
			# just in case
			hidden_effect = {
				s:STATE_SEOUL = {
					random_scope_state = {
						set_state_owner = c:STK
					}
				}
				s:STATE_YANGHO = {
					random_scope_state = {
						set_state_owner = c:STK
					}
				}
				s:STATE_BUSAN = {
					random_scope_state = {
						set_state_owner = c:STK
					}
				}
			}
		}
		hidden_effect = {
			set_global_variable = decision_united_korea
		}
	}
	ai_chance = {
		base = 10
	}
}

# countries can select a decision that would involve them in the korean conflict
involvement_in_korea = {
	is_shown = {
		NOR = {
			has_global_variable = korean_resolution_complete
			has_global_variable = korean_resolution_fail
			has_variable = involved_in_korea
		}
		has_interest_marker_in_region = region_east_asia
	}
	possible = {
		has_interest_marker_in_region = region_east_asia
		is_at_war = no
	}
	when_taken = {
		if = {
			limit = {
				NOT = {
					coa_communist_trigger = yes
				}
			}
			custom_tooltip = {
				text = korea_involvement_tt
				set_variable = involved_in_korea
			}
			hidden_effect = {
				add_to_global_variable_list = {
					name = korea_democratic_countries_involved
					target = ROOT
				}
			}
		}
		else_if = {
			limit = {
				coa_communist_trigger = yes
			}
			custom_tooltip = {
				text = korea_involvement_commie_tt
				set_variable = involved_in_korea
			}
			hidden_effect = {
				add_to_global_variable_list = {
					name = korea_communist_countries_involved
					target = ROOT
				}
			}
		}
	}
}
